#include "mbed.h"
 
// Sensors drivers present in the BSP library
#include "stm32l475e_iot01_tsensor.h"
#include "stm32l475e_iot01_hsensor.h"

 
DigitalOut led(LED1);
Serial pc(USBTX, USBRX);


int main()
{
    int sensor_value = 0;

    pc.printf("Start sensor init\n");
 
    BSP_TSENSOR_Init();
    BSP_HSENSOR_Init();

 
    while(1) {
        pc.printf("\nNew loop, LED1 should blink during sensor read\n");
 
        led = 1;
 
        sensor_value = BSP_TSENSOR_ReadTemp();
        pc.printf("\nTEMPERATURE = %d degC\n", sensor_value);
 
        sensor_value = BSP_HSENSOR_ReadHumidity();
        pc.printf("HUMIDITY    = %d %%\n", static_cast<int>(sensor_value));

 
        led = 0;
 
        ThisThread::sleep_for(1000);
 
 
    }
}